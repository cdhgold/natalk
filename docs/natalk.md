# NaTalk 인증 시스템 개편: 방장(이메일) 및 손님(비밀번호) 로그인

NaTalk의 인증 및 방장 관리 시스템이 대대적으로 개편되었습니다. 기존의 '첫 접속자 방장' 모델에서, **이메일로 방장을 식별**하고 **비밀번호로 손님을 인증**하는 명확하고 안전한 방식으로 변경되었습니다.

## 무엇이 문제였나요? (이전 방식)

- **모호한 방장 지정**: 방 생성 후 처음으로 접속하는 사용자가 방장이 되는 방식은, 네트워크 지연이나 동시 접속 시 누가 방장이 될지 예측하기 어려웠습니다.
- **불편한 권한 유지**: 방장 권한이 특정 브라우저의 세션에만 귀속되어, 다른 기기나 브라우저에서 접속하면 방장 권한을 잃게 되는 문제가 있었습니다. 방장임을 증명할 방법이 없었습니다.

## 어떻게 해결했나요? (새로운 방식)

새로운 시스템은 **방장**과 **손님**의 역할을 명확히 구분하여, 각각 다른 방식으로 로그인하도록 설계되었습니다.

### 1. 방 생성: 이메일로 소유권 등록

- 이제 새로운 방을 생성할 때, 사용자는 **방 이름**, **참여자용 비밀번호**와 함께 **방장 본인의 이메일 주소**를 반드시 입력해야 합니다.
- 이 이메일 주소는 해당 방의 유일한 소유자(`ownerEmail`) 정보로 서버에 영구적으로 저장됩니다.

### 2. 방장 로그인 (이메일 기반)

- 방장은 로그인 화면에서 **'방장'** 탭을 선택합니다.
- **방 이름(또는 초대 코드)**과 방 생성 시 등록했던 **본인의 이메일 주소**를 입력하여 입장합니다.
- 서버는 입력된 이메일이 해당 방의 `ownerEmail`과 일치하는지 확인하고, 일치하면 사용자에게 방장 권한(`isAdmin: true`)을 부여합니다.

### 3. 손님 로그인 (비밀번호 기반)

- 손님(참여자)은 로그인 화면에서 **'손님'** 탭을 선택합니다.
- **방 이름(또는 초대 코드)**과 해당 방의 **참여자용 비밀번호**를 입력하여 입장합니다.
- 서버는 비밀번호가 일치하는지 확인하고, 성공 시 일반 사용자 권한(`isAdmin: false`)으로 입장을 허용합니다.

### 주요 개선점

- **명확한 소유권**: 방의 소유자가 이메일 주소로 명확하게 지정되므로, 더 이상 방장 지정에 대한 혼동이 없습니다.
- **완벽한 크로스-디바이스 지원**: 방장은 어떤 PC, 모바일, 브라우저에서든 자신의 이메일로 로그인하기만 하면 언제나 방장 권한을 가질 수 있습니다.
- **사용성 향상**: 로그인 방식이 '방장'과 '손님'으로 직관적으로 나뉘어 사용자가 역할을 쉽게 이해하고 입장할 수 있습니다.
- **보안 강화**: 방장과 일반 참여자의 인증 경로가 분리되어 보안이 더욱 강화되었습니다. 이제 방장만이 방 관리 기능을 사용할 수 있다는 점이 보장됩니다.
